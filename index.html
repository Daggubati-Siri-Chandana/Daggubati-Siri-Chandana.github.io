<html> 
    <head>   
    <title>Divide Tab </title>
        <style>
                         
            body, html {
              width: 100%;
              height: 100%;
              margin: 0;
            }

            .container {
              width: 100%;
              height: 100%;
            }

            .leftpane {
                width: 18%;
                height: 100%;
                float: left;
                background-color: rgb(200,200,200);
                border-collapse: collapse;
            }

            .middlepane {
                width: 66%;
                height: 100%;
                float: left;
                background-color: rgb(255,255,255);
                border-collapse: collapse;
            }
            .im {
                float: top;
            }
            .reconst {
                float: bottom;
            }
            .rightpane {
              width: 16%;
              height: 100%;
              position: relative;
              float: right;
              background-color: rgb(200,200,200);
              border-collapse: collapse;
            }

            .toppane {
              width: 100%;
              border-collapse: collapse;
              background-color: rgb(255,255,255);
            }
            .button {
            background-color: rgb(200,200,200);
            padding: 10px;
            font-size: 16px;
            color: black;
            cursor: pointer;
            border: 2px solid #008CBA;
            border-radius: 4px;
            margin-bottom:10px;
            width: 180px
            }

            .button:hover {
            background-color: #008CBA;
            color: white;
            width: 180px
            }

            .dropbtn {
              background-color: rgb(255,255,255);
              color: #008CBA;
              padding: 2px;
              font-size: 16px;
              cursor: pointer;
              border: none;
              margin-bottom:10px;
              width: 150px;
            }
            .dropbtn:hover, .dropbtn:focus {
              background-color: #008CBA;
              color: rgb(255,255,255);
            }
            .dropbtn option:hover {
                background-color: #008CBA
                color: rgb(255,255,255);
            }
        
            img {
              border: 1px solid #ddd; /* Gray border */
              border-radius: 2px;  /* Rounded border */
              padding: 2px; /* Some padding */
              width: 70px; /* Set a small width */
              background-image: url("/data/bg.png");
            }
            img:hover {
              box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
            }
            .closebtn {
              position: absolute;
              top: 10px;
              right: 15px;
              color: white;
              font-size: 35px;
              cursor: pointer;
            }
        </style>
</head>
    
    
<body>
    <div class="container">
      <div class="leftpane" align="center">
          <div class="toppane"><h1>Chart Images</h1></div>
          <img src="/data/Test/HorizontalBar/hb1/hb1.png" onclick="myFunction(this);">
          <img src="/data/Test/HorizontalStackedBar/hsb3/hsb3.png " onclick="myFunction(this);">
          <img src="/data/Test/Histogram/hist3/hist3.png " onclick="myFunction(this);">
          <img src="/data/Test/GroupedBar/gb1/gb1.png " onclick="myFunction(this);">
          <img src="/data/Test/GroupedBar/gb2/gb2.png " onclick="myFunction(this);">
          <img src="/data/Test/GroupedBar/gb3/gb3.png " onclick="myFunction(this);">
          <img src="/data/Test/GroupedBar/gb5/gb03.png " onclick="myFunction(this);">
          <img src="/data/Test/GroupedBar/test/test.png" onclick="myFunction(this);">
      </div>
      
      <div class="rightpane" align="center">
              <div class="toppane" height="80px"><h1>Widget Settings</h1></div>
              <button class="button" onclick="dispCorner()">Display Corner points</button>
              <button class="button" onclick="getCSV()">Extract and Download Data</button>
              <label font-size="16px">Choose a color ccheme for chart reconstruction</label>
              <select id="myDropdown" class="dropbtn">
                <option value="grey">GreyScale</option>
                <option value="seq">Sequential</option>
                <option value="diverging">Diverging</option>
              </select>
              <br>
              <button class="button" onclick='extractData()'>Reconstruct Chart</button>
      </div>
    
    
      <div class="middlepane" align="center">
        <div class="toppane" id ="top"><h1>Bar chart Analyzer</h1></div>
        <div class="im">
            <span onclick="this.parentElement.style.display='none'" class="closebtn">&times;</span>
            <img id="expandedImg" style="width:90%">
            <img id="reconsImg" style="width:90%">
        </div>
        </div>
     </div>
    </div>
    <script>
        var imgPath =''
        function myFunction(imgs) {
          var expandImg = document.getElementById("expandedImg");
          var reconsImg = document.getElementById("reconsImg");
          expandImg.src = imgs.src;
          reconsImg.src = '';
          imgPath = imgs.src
          expandImg.parentElement.style.display = "block";
        }
        
        function dispCorner() {
          var expandImg = document.getElementById("expandedImg");
          var imgText = document.getElementById("imgtext");
          var pathArr = imgPath.split("/");
          var imPath = '';
          for(var i=0;i <pathArr.length-1;i++){
             imPath=imPath.concat(pathArr[i]);
             imPath=imPath.concat('/');
          }
          var imName = pathArr[pathArr.length-1].split('.png')[0];
          var canvIm = imPath.concat('TV_').concat(imName).concat('.png');
          console.log(imPath);
          console.log(imName);
          console.log(canvIm);
          expandImg.src = canvIm;
          expandImg.parentElement.style.display = "block";
        }
        function extractData() {
            var clr = document.getElementById("myDropdown").selectedIndex;
            var reconsImg = document.getElementById("reconsImg");
            var imgText = document.getElementById("imgtext");
            var pathArr = imgPath.split("/");
            var imPath = '';
            for(var i=0;i <pathArr.length-1;i++){
               imPath=imPath.concat(pathArr[i]);
               imPath=imPath.concat('/');
            }
            var imName = pathArr[pathArr.length-1].split('.png')[0];
          if(clr==0){
              var canvIm = imPath.concat('reconstructed_').concat(imName).concat('.png');
              reconsImg.src = canvIm;
              reconsImg.parentElement.style.display = "block";
          }
        }
        
        function getCSV() { 
          var pathArr = imgPath.split("/");
          var imPath = '';
          for(var i=0;i <pathArr.length-1;i++){
             imPath=imPath.concat(pathArr[i]);
             imPath=imPath.concat('/');
          }
          var imName = pathArr[pathArr.length-1].split('.png')[0];
          var canvIm = imPath.concat('data_').concat(imName).concat('.csv');
          console.log(imPath);
          console.log(imName);
          console.log(canvIm);
            //creating an invisible element
            var element = document.createElement('a');
            element.setAttribute('href', canvIm);
            element.setAttribute('download', canvIm);
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        

    
    </script>
    </body> 
</html>


